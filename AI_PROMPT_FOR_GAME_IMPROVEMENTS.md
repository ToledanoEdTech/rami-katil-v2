# פרומט לשיפור משחק - מבוסס על שינויים שבוצעו ב-48 השעות האחרונות

## הקשר כללי
אני מפתח משחק דומה ל"רמי וקטיל" ואני רוצה ליישם שיפורים ותכונות חדשות שנבנו במשחק אחר במהלך 48 השעות האחרונות. אני צריך עזרה בבניית הקוד, שיפור הקוד הקיים, ותיקון באגים.

## תכונות ושיפורים שצריך ליישם:

### 1. מערכת מסכי פתיחה (Intro Slides) - **חדש!**
אני רוצה לבנות מערכת אינטרו חדשה עם:
- **5 תמונות אינטרו** - כל תמונה מייצגת שלב בסיפור הפתיחה
- **קובץ שמע/מוזיקה** - מוזיקת רקע שתנגן במהלך האינטרו
- **כיתובים דינמיים** - כל תמונה תלווה בטקסט שמסביר את הסיפור
- **טעינה מראש (Preloading)** - כל התמונות והמוזיקה צריכים להיטען מראש כדי למנוע עיכובים
- **מעבר אוטומטי** - מעבר בין תמונות עם טיימר (למשל 3-5 שניות לכל תמונה)
- **אפשרות לדלג** - כפתור "דלג" שמאפשר לדלג על האינטרו
- **מצב משחק נפרד** - מצב `INTRO` במצבי המשחק (בנוסף ל-MENU, GAME, PAUSED וכו')

**דרישות טכניות:**
- מערך של 5 נתיבי תמונות (paths)
- מערך של 5 טקסטים (כיתובים)
- קובץ אודיו אחד למוזיקת רקע
- State management למעקב אחר התמונה הנוכחית
- Preloading של כל התמונות לפני הצגה
- אנימציות מעבר חלקות בין תמונות
- UI יפה עם אפקטי glassmorphism/neon (אם רלוונטי)

### 2. מערכת מוזיקה משופרת
- **תמיכה במוזיקת אינטרו** - פונקציה `playIntroMusic()` שתנגן את מוזיקת האינטרו
- **ניהול מצבים** - מערכת שמנהלת איזה מוזיקה מנגנת לפי המצב (menu/game/intro)
- **מעבר אוטומטי** - כשהאינטרו מסתיים, מעבר אוטומטי למוזיקת משחק
- **טיפול בשגיאות** - הגנה מפני קבצים חסרים או בעיות autoplay
- **השתקה/הפעלה** - תמיכה בהשתקת המוזיקה

**דרישות טכניות:**
- אובייקט `introTrack` למוזיקת האינטרו
- Enum או type למצבי מוזיקה: `'menu' | 'game' | 'intro'`
- פונקציות לעצירה והפעלה של כל סוג מוזיקה
- טיפול ב-Autoplay policies של הדפדפן

### 3. לוגו מקומי
- הוספת קובץ לוגו מקומי (PNG) לפרויקט
- שימוש בלוגו במסכי טעינה ותפריטים
- החלפת לוגו חיצוני (אם קיים) בלוגו מקומי

### 4. בוסים חדשים
- הוספת בוס חדש עם תמונה (sprite sheet או תמונה בודדת)
- אם זה sprite sheet, יצירת קובץ JSON שמגדיר:
  - מספר פריימים
  - FPS (frames per second)
  - מספר עמודות ושורות
  - צבע key (אם יש transparency)
- שילוב הבוס במערכת הבוסים הקיימת

### 5. קבצי הפעלה (Batch Files)
- קובץ `.bat` להפעלת שרת פיתוח (`npm run dev`)
- קובץ `.bat` להפעלת גרסה מוכנה (production build)
- הודעות בעברית (או שפה רלוונטית)

### 6. שיפורי מנוע המשחק (Game Engine)
- **אופטימיזציה למובייל** - האטת מהירות המשחק ב-40% במובייל
- **שיפורי ביצועים** - אופטימיזציה של רינדור, collision detection, וניהול אובייקטים
- **שיפורי מערכת הבוסים** - שיפור לוגיקת הבוסים, HP, אנימציות
- **שיפורי מערכת הנשק** - שיפור מערכת התחמושת, נשקים שונים, אפקטים
- **שיפורי אפקטים** - שיפור פיצוצים, חלקיקים, אנימציות

**דרישות טכניות:**
- זיהוי מובייל (width < 600px)
- התאמת מהירות וקושי למובייל
- Pooling של אובייקטים (enemies, bullets, particles)
- אופטימיזציה של canvas rendering

### 7. שיפורי ממשק משתמש (UI/UX)
- **מערכת טעינה משופרת** - progress bar עם סטטוס טקסט
- **שיפורי תפריטים** - עיצוב משופר, אנימציות, אפקטים
- **שיפורי HUD** - שיפור ממשק המשחק בזמן משחק
- **שיפורי Shop** - עיצוב משופר לחנות, כרטיסי פריטים
- **שיפורי מערכת הישגים** - הודעות, נוטיפיקציות

### 8. שיפורי עיצוב (CSS/UI Styles)
- **עיצוב מסכי אינטרו** - עיצוב יפה למסכי הפתיחה
- **אפקטי Glassmorphism** - כפתורים ושדות עם אפקט זכוכית
- **אפקטי ניאון** - טקסטים עם אפקט ניאון, shadows
- **אנימציות רקע** - כוכבים, חלקיקים, ספינות שטות
- **אנימציות מעבר** - fade in/out, slide up/down
- **תמיכה ב-Safe Area** - תמיכה ב-notch של iPhone
- **Responsive Design** - עיצוב מותאם למובייל ו-desktop

**דרישות טכניות:**
- CSS Variables לניהול צבעים וסגנונות
- Animations ו-transitions חלקות
- Backdrop filters (blur effects)
- Box shadows מורכבים לאפקטי עומק
- Media queries למובייל

### 9. שיפורי מערכת סאונד
- **תמיכה במוזיקת אינטרו** - כפי שצוין בסעיף 2
- **שיפורי אפקטים קוליים** - שיפור SFX (shoot, hit, explosion, etc.)
- **ניהול נפח** - master gain, נפח נפרד למוזיקה ואפקטים
- **טיפול בשגיאות** - הגנה מפני קבצים חסרים

### 10. עדכונים נוספים
- עדכוני `index.html` - מטא-תגים, PWA support
- עדכוני types - הוספת טיפוסים חדשים למצבי משחק
- שיפורי תמונות - עדכון תמונות קיימות לאיכות טובה יותר

## דרישות כלליות לקוד:

1. **TypeScript** - כל הקוד צריך להיות ב-TypeScript עם טיפוסים מלאים
2. **React** - אם המשחק משתמש ב-React, לשמור על best practices
3. **Performance** - הקוד צריך להיות אופטימלי, ללא memory leaks
4. **Responsive** - תמיכה במובייל ו-desktop
5. **Accessibility** - תמיכה ב-keyboard navigation ו-screen readers (אם רלוונטי)
6. **Error Handling** - טיפול בשגיאות בכל מקום רלוונטי
7. **Code Organization** - קוד מאורגן, מודולרי, עם הערות בעברית (או שפה רלוונטית)

## הוראות ספציפיות:

1. **בניית האינטרו:**
   - צור מערך של 5 נתיבי תמונות
   - צור מערך של 5 טקסטים (כיתובים)
   - צור state למעקב אחר התמונה הנוכחית
   - צור מערכת preloading שטוענת את כל התמונות מראש
   - צור קומפוננטה/מסך אינטרו עם:
     - תצוגת התמונה הנוכחית
     - תצוגת הטקסט הנוכחי
     - כפתור "דלג"
     - טיימר למעבר אוטומטי
   - הוסף את מצב `INTRO` למצבי המשחק
   - צור פונקציה `startGame(skipIntro: boolean)` שמאפשרת לדלג על האינטרו

2. **מוזיקת אינטרו:**
   - הוסף `introTrack` לאובייקט הסאונד
   - צור פונקציה `playIntroMusic()` שמנגנת את המוזיקה
   - ודא שהמוזיקה נעצרת כשהאינטרו מסתיים ומתחילה מוזיקת משחק
   - הוסף טיפול בשגיאות (קבצים חסרים, autoplay)

3. **שיפורי מנוע:**
   - זהה מובייל לפי width
   - התאם מהירות וקושי למובייל
   - אופטימיזציה של rendering loop
   - שיפור collision detection
   - Pooling של אובייקטים

4. **שיפורי UI:**
   - צור עיצוב יפה למסכי אינטרו
   - שפר את עיצוב הכפתורים עם glassmorphism
   - הוסף אנימציות חלקות
   - ודא responsive design

## הערות חשובות:

- אם יש קוד קיים, יש לשפר אותו ולא לכתוב מחדש (אלא אם כן יש צורך)
- יש לשמור על עקביות עם הסגנון הקיים
- יש לבדוק שהכל עובד גם במובייל וגם ב-desktop
- יש לוודא שאין memory leaks או בעיות ביצועים
- יש לטפל בשגיאות בצורה אלגנטית

## שאלות לשאול אותי (אם צריך):

1. מה המבנה הנוכחי של המשחק? (React? Vanilla JS? Framework אחר?)
2. איך מערכת הסאונד הקיימת עובדת?
3. איך מערכת מצבי המשחק עובדת?
4. מה הסגנון העיצובי של המשחק? (Sci-Fi? Fantasy? וכו')
5. איפה נמצאות התמונות והקבצים? (public folder? assets folder?)

---

**בבקשה עזור לי ליישם את כל השיפורים האלה בצורה מקצועית, נקייה, ומותאמת למשחק שלי.**
